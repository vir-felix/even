<div class="product-carousel">
    <div class="container">
        <h3 class="title">{{title}}</h3>
        <div class="carousel">
            <button id="carousel-prev-{{widgetId}}" class="carousel-prev btn btn-sm btn-secondary">
                <i class="fa fa-angle-left"></i>
            </button>
            <button id="carousel-next-{{widgetId}}" class="carousel-next btn btn-sm btn-secondary">
                <i class="fa fa-angle-right"></i>
            </button>
            <div class="row" id="product-carousel-{{widgetId}}">
                {% for product in products %}
                {% partial "Products/_ProductBox" %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    ready(function() {
        jQuery("#product-carousel-{{widgetId}}").slick({
            infinite: true,
            slidesToShow: 4,
            slidesToScroll: 4,
            prevArrow: jQuery('#carousel-prev-{{widgetId}}'),
            nextArrow: jQuery('#carousel-next-{{widgetId}}'),
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        infinite: true,
                        dots: true
                    }
                },
                {
                    breakpoint: 600,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }
            ]
        });
    });
</script>